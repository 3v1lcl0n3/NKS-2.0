<html lang="en">
  <head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link  rel="stylesheet" href="css/style.css">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="HandheldFriendly" content="true"/>
	<title>Keyboard Experiment</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js"></script>
	<script src = "js/login_script.js"></script> 
  </head>
  
  <body>	
  <div class = "container" id="container">
  <menu class="menu">
  <li class="menu-item">
    <button type="button" id="Undo" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-folder-open"></i> <span class="menu-text">Undo</span> </button>
  </li>
  <li class="menu-item disabled">
    <button type="button" class="menu-btn" onClick="loggaj(this.id)" > <span class="menu-text">Redo</span> </button>
  </li>
  <li class="menu-separator"></li>
  <li class="menu-item">
    <button type="button" id="Copy" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-copy"></i> <span class="menu-text">Copy</span> </button>
  </li>
  <li class="menu-item">
    <button type="button" id="Cut" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-cut"></i> <span class="menu-text">Cut</span> </button>
  </li>
  <li class="menu-item">
    <button type="button" id="Paste" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-paste"></i> <span class="menu-text">Paste</span> </button>
  </li>
  <li class="menu-item submenu">
    <button type="button" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-users"></i> <span class="menu-text">Document</span> </button>
    <menu class="menu">
      <li class="menu-item">
        <button type="button" id="Save" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-comment"></i> <span class="menu-text">Save</span> </button>
      </li>
      <li class="menu-item submenu">
        <button type="button" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-share"></i> <span class="menu-text">Share</span> </button>
        <menu class="menu">
          <li class="menu-item">
            <button type="button" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-twitter"></i> <span class="menu-text">Twitter</span> </button>
          </li>
          <li class="menu-item">
            <button type="button" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-facebook-official"></i> <span class="menu-text">Facebook</span> </button>
          </li>
          <li class="menu-item">
            <button type="button" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-google-plus"></i> <span class="menu-text">Google Plus</span> </button>
          </li>
          <li class="menu-item">
            <button type="button" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-envelope"></i> <span class="menu-text">Email</span> </button>
          </li>
        </menu>
      </li>
    </menu>
  </li>
  <li class="menu-separator"></li>
  <li class="menu-item">
    <button type="button" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-download"></i> <span class="menu-text">Edit</span> </button>
  </li>
  <li class="menu-item">
    <button type="button" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-edit"></i> <span class="menu-text">Rename</span> </button>
  </li>
  <li class="menu-item">
    <button type="button" class="menu-btn" onClick="loggaj(this.id)"> <i class="fa fa-trash"></i> <span class="menu-text">Delete</span> </button>
  </li>
</menu>


  <script> 
  var start_unos = 0;
  var kraj_akcije = 0;
  var do_unosa = 0;
  var rightMouseClicked = false;
  var time_log = "";
  var user_log = "";
  var zadatak = 0;
  var zadatak_string = "";
  //var zad_array = [1,2,3,4,5,1,2,3,4,5,1,2,3,4,5];
  var zad_array = [1,2,3,4,5,3,4,5,1,2,5,4,3,1,2,3,4,1,5,2,3,5,1,4,2,5,1,3,2,4,1,3,2,4,5,3,4,1,2,5,4,3,1,2,5,1,3,2,4,5,5,4,2,3,1,5,2,1,3,4,5,2,1,4,3,5,4,2,3,1,4,2,3,1,5,2,4,1,5,3,2,5,1,4,3,2,1,3,4,5,2,1,5,4,3,5,4,3,2,1];
  var device = localStorage.getItem('device');
  var student_id = localStorage.getItem('student_id');
  var count = 0;
  var err_num = 0;
  </script>
  <script src = "js/contextmenu.js"></script>
  <script>
  function loggaj(clicked_id){
  kraj_akcije = Math.round((performance.now() - start_unos) * 100) / 100;
  if(clicked_id == "Copy" && zadatak == 1 || clicked_id == "Paste" && zadatak == 2 || clicked_id == "Cut" && zadatak == 3 || clicked_id == "Save" && zadatak == 4 || clicked_id == "Undo" && zadatak == 5 ){
  time_log += zadatak_string +":" + kraj_akcije + ":" + err_num + "\n";
  set_zad();
  }
  else document.getElementById('result').innerHTML = "Krivi unos";
  }
  
  function downloadResults(string,type) {
	var blob = new Blob([string], {type: "text/plain;charset=utf-8"});
	var date = new Date();
	var currentDate = [date.getFullYear(), date.getMonth(), date.getDate()].join('');
	var currentTime = [date.getHours(), date.getMinutes(), date.getSeconds()].join('');
	var fileName = type + "_" + student_id + "_" + device + "_" + currentDate + "_" + currentTime + ".csv";
	saveAs(blob, fileName);
}
     
  function zadatak_copy(){
  zadatak = 1;
  zadatak_string = "Copy";
  document.getElementById("ime_zad").innerHTML = "Akcija: Copy";
  if(device == "mouse") {
  document.getElementById("opis_zad").innerHTML = "Desni klik -> Copy";
  }
  if(device == "tablet") {
  document.getElementById("opis_zad").innerHTML = "Gornja tipka na olovci i gesta u obliku kruga";
  }
  }
  
  function zadatak_paste(){
  zadatak = 2;
  zadatak_string = "Paste";
  document.getElementById("ime_zad").innerHTML = "Akcija: Paste";
  if(device == "mouse") {
  document.getElementById("opis_zad").innerHTML = "Desni klik -> Paste";
  }
  if(device == "tablet") {
  document.getElementById("opis_zad").innerHTML = "Gornja tipka na olovci i gesta u obliku kvačice";
  }
  }
  
  function zadatak_cut(){
  zadatak = 3;
  zadatak_string = "Cut";
  document.getElementById("ime_zad").innerHTML = "Akcija: Cut";
  if(device == "mouse") {
  document.getElementById("opis_zad").innerHTML = "Desni klik -> Cut";
  }
  if(device == "tablet") {
  document.getElementById("opis_zad").innerHTML = "Gornja tipka na olovci i gesta u obliku Cikcak";
  }
  }
  
  function zadatak_save(){
  zadatak = 4;
  zadatak_string = "Save";
  document.getElementById("ime_zad").innerHTML = "Akcija: Save";
  if(device == "mouse") {
  document.getElementById("opis_zad").innerHTML = "Desni klik -> Document -> Save";
  }
  if(device == "tablet") {
  document.getElementById("opis_zad").innerHTML = "Gornja tipka na olovci i gesta u obliku kvadrata";
  }
  }
  
  function zadatak_undo(){
  zadatak = 5;
  zadatak_string = "Undo";
  document.getElementById("ime_zad").innerHTML = "Akcija: Undo";
  if(device == "mouse") {
  document.getElementById("opis_zad").innerHTML = "Desni klik -> Undo";
  }
  if(device == "tablet") {
  document.getElementById("opis_zad").innerHTML = "Gornja tipka na olovci i gesta u obliku polukruga";
  }
  }
  
  function set_zad(){
  err_num = 0;
  document.getElementById('result').innerHTML = "";
  
  if(zad_array[count] == 1) zadatak_copy();
  if(zad_array[count] == 2) zadatak_paste();
  if(zad_array[count] == 3) zadatak_cut();
  if(zad_array[count] == 4) zadatak_save();
  if(zad_array[count] == 5) zadatak_undo();
  
  if(count == 100) downloadResults(time_log, "Time_Log");
  
  count++;
  
  }
  
  </script>
  
  <div style='text-align: center;' id="Task_form">
  
	<h1 class="tekst" id="ime_zad"> Ime Zadatka</h1>
	<h3 class="tekst" id="opis_zad"> Opis Zadatka</h3>
	
	
	<h3 class="tekst" id='result' style="color:red;" ></h3>
	
  
</div>
  <canvas id="gestures_canvas" height="" width="">
  </canvas>
  <script type="text/javascript" src="./js/gestures.js" ></script>
  <script type="text/javascript" src="./js/added_gestures.js" ></script>
<script>
  //bruh samo mouse ups and downs
  function handleMouseDown(e) {
  //e.button describes the mouse button that was clicked
  // 0 is left, 1 is middle, 2 is right
  if (e.button === 2) rightMouseClicked = true;
  
  if(rightMouseClicked == true) {
  start_unos = performance.now();
  document.getElementById('result').innerHTML = "";
  }
}

function handleMouseUp(e) {
  if (e.button === 2) {
    rightMouseClicked = false;
  }
}

document.addEventListener('mousedown', handleMouseDown);
document.addEventListener('mouseup', handleMouseUp);

set_zad();
</script>

	</div>
</body>



</html>